# 도파민의 민족 — 구체화된 기획서 v2

> 원본: `docs/기획서.md` | 파티모드 에이전트 토론을 통해 구체화된 버전

## 프로젝트 개요

다양한 내기를 하며 도파민을 충전하는 친구들의 통계를 만들어주는 소셜 웹앱.
친구들끼리 내기하고, 결과를 기록하고, 놀림 카드를 공유하며 즐기는 서비스.

### 핵심 가치

- **재미**: 내기 자체의 스릴 + 놀림 카드로 친구 놀리기
- **바이럴**: 놀림 카드 공유를 통한 자연스러운 신규 유저 유입
- **기록**: 내기 통계를 체계적으로 관리

### 도파민 단위 체계

- **1 도파민 = 1원** (실제 금액 매핑)
- UI에서는 "500 도파민 (₩500)" 형태로 병기
- 음수 = 손해, 양수 = 이득

---

## MVP 스코프 (Phase 1)

1. 카카오 소셜 로그인/로그아웃
2. 도파민 스테이션 CRUD + 초대 (링크 기반)
3. 내기 게임 2종 앱 내 플레이 — 악어이빨, 랜덤뽑기
4. 수동 도파민 입/출금 기록
5. 멤버별 대시보드 (승/패/도파민 수지)
6. 놀림 카드 OG 이미지 공유

### Phase 2 (이후)

- 공 떨어지는 게임 + 추가 게임
- 상세 통계/차트
- 알림 시스템
- 게임 히스토리 타임라인

---

## 기능 상세

### 1. 인증

- **방식**: 카카오 소셜 로그인 (Supabase OAuth)
- **유저 정보**: 카카오 닉네임, 프로필 이미지 자동 연동
- **세션**: Supabase Auth 세션 관리

### 2. 도파민 스테이션

스테이션은 내기를 함께하는 그룹. 카카오톡 그룹채팅방과 유사한 멘탈모델.

#### 스테이션 생성

- 입력 항목: 제목(필수), 설명(선택), 프로필 이미지(선택)
- 생성자는 자동으로 owner 역할 부여

#### 스테이션 초대

- 초대 링크 생성 → 카카오톡/기타 메신저로 공유
- 링크 클릭 시 로그인 후 자동 합류

#### 스테이션 리스트 (홈 화면)

- 유저가 참여 중인 스테이션 목록 표시
- 각 스테이션 카드: 프로필 이미지, 제목, 설명, 인원수
- 최근 활동 순 정렬

### 3. 스테이션 상세

#### 대시보드

멤버별 통계를 한눈에 보여주는 화면:

| 항목 | 설명 |
|------|------|
| 닉네임 + 프로필 | 카카오 연동 정보 |
| 승리 수 | 해당 스테이션 내 총 승리 |
| 패배 수 | 해당 스테이션 내 총 패배 |
| 도파민 수지 | 순이익/순손실 (₩ 병기) |
| 총 사용 도파민 | 스테이션 내 전체 거래 금액 |

감정적 피드백 요소:
- 연패 시: "🔥 연패 5연속!" 뱃지
- 대승 시: "💰 오늘의 도파민 킹" 뱃지
- 최대 손실: "📉 이 스테이션의 공인 호구" 태그

#### 내기 게임 목록

스테이션 상세에서 게임을 선택하여 플레이:

**게임 1: 악어이빨 게임** 🐊
- 참여자: 2명 이상
- 규칙: 차례대로 이빨(버튼)을 누르고, 당첨 이빨을 누른 사람이 패배
- 판돈: 게임 시작 전 설정 (도파민 단위)
- 패배자가 판돈만큼 도파민 차감, 나머지 참여자에게 균등 분배

**게임 2: 랜덤뽑기 게임** 🎰
- 참여자: 2명 이상
- 규칙: 참여자 중 랜덤으로 1명 패배자 선정
- 판돈: 게임 시작 전 설정
- 패배자가 판돈만큼 도파민 차감, 나머지 참여자에게 균등 분배

**게임 공통 플로우:**
```
게임 선택 → 판돈 설정 → 참여자 선택 → 게임 플레이 → 결과 표시 → 자동 기록
```

#### 수동 도파민 입력

앱 내 게임 외에 오프라인 내기 결과를 직접 기록:
- 입력 항목: 보내는 사람, 받는 사람, 금액, 설명(선택)
- 양쪽 모두 스테이션 멤버여야 함

### 4. 유저 상세 (스테이션 내)

#### 상세 대시보드

특정 멤버의 스테이션 내 전체 기록:
- 총 승/패 수 및 승률
- 도파민 수지 추이
- 게임별 통계
- 최근 내기 히스토리

#### 놀림 카드 공유

OG 이미지로 생성되어 카카오톡/인스타그램에 공유 가능한 카드.

**카드 포함 내용:**
- 유저 닉네임 + 프로필 이미지
- 스테이션명
- 총 승/패 수
- 도파민 수지 (₩ 병기)
- 놀림 멘트

**놀림 멘트 시스템:**

손실 구간 (도파민 수지 < 0):
- "🔥 이 스테이션의 공인 호구"
- "💸 ATM 그 자체"
- "🗑️ 운이 없는 쓰레기"
- "🎯 도파민 기부 천사"
- "📉 바닥을 뚫고 지하실로"

이득 구간 (도파민 수지 > 0):
- "😎 도파민 빌런"
- "🏆 주변인 지갑 파괴자"
- "💉 꽁짜 도파민 주입기"
- "🦈 이 스테이션의 상어"
- "👑 도파민 왕좌의 주인"

무승부 구간 (도파민 수지 ≈ 0):
- "⚖️ 균형의 신"
- "🎭 노는 건 좋은데 실력은 평범"

---

## 유저 플로우

```
카카오 로그인
  → 스테이션 리스트 (홈)
    ├→ 스테이션 생성 (제목, 설명, 이미지)
    ├→ 초대 링크 수락 → 스테이션 합류
    └→ 스테이션 상세
        ├→ 대시보드 (멤버별 승/패/도파민 수지)
        ├→ 게임 시작
        │   → 게임 선택 → 판돈 설정 → 참여자 선택
        │   → 플레이 → 결과 표시 → 자동 기록
        ├→ 수동 도파민 입력
        └→ 멤버 프로필 상세
            → 놀림 카드 공유 (OG 이미지)
```

---

## 기술 스택

| 영역 | 기술 | 비고 |
|------|------|------|
| Framework | Next.js 15 (App Router) | 최신 버전 |
| 아키텍처 | FSD (Feature-Sliced Design) | 계층별 분리 |
| 상태/데이터 | TanStack Query v5 | queryOptions 팩토리 패턴 |
| UI | shadcn/ui + Tailwind CSS v4 | VStack/Typography 래퍼 사용 |
| Backend | Supabase | Auth, DB, Realtime, Storage |
| OG 이미지 | @vercel/og (ImageResponse) | 한글 폰트 번들링 필요 |
| 인증 | Supabase Auth + 카카오 OAuth | 소셜 로그인 |

---

## DB 스키마 요약

| 테이블 | 용도 |
|--------|------|
| users | 카카오 로그인 유저 (kakao_id, nickname, avatar_url) |
| stations | 도파민 스테이션 그룹 (title, description, image_url) |
| station_members | 스테이션 멤버십 (role: owner/member) |
| game_types | 게임 종류 정의 (악어이빨, 랜덤뽑기) |
| game_sessions | 내기 세션 (bet_amount, status) |
| game_participants | 참여자 + 결과 (result, dopamine_change) |
| manual_entries | 수동 도파민 입력 (from_user, to_user, amount) |
